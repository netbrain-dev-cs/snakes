<!doctype html>

<html>

<body>

    <canvas id="can" width="400" height="400" style="background:Black"></canvas>

    <script>
        const WIDTH = 20;
        const MAX_WIDTH_INDEX = WIDTH - 1;
        const HEIGHT = 20;
        const POSITION_WIDTH = 20;
        const POSITION_HEIGHT = 20;
        const POSITIONS_LENGTH = WIDTH * HEIGHT;
        const MAX_POSITIONS_INDEX = POSITIONS_LENGTH - 1;

        var sn = [42, 41],
            dz = 43,
            fx = 1,
            n,
            ctx = document.getElementById("can").getContext("2d");

        function draw(t, c) {

            ctx.fillStyle = c;

            ctx.fillRect(
                t % WIDTH * POSITION_WIDTH + 1, ~~(t / HEIGHT) * POSITION_HEIGHT + 1,
                18,
                18
            );

        }

        document.onkeydown = function (e) {
            fx = sn[1] - sn[0] == (n = [-1, -WIDTH, 1, WIDTH][(e || event).keyCode - 37] || fx) ?
                fx :
                n
        };

        ! function () {

            sn.unshift(n = sn[0] + fx);

            if (
                sn.indexOf(n, 1) > 0 ||
                n < 0 ||
                n > MAX_POSITIONS_INDEX ||
                fx == 1 && n % WIDTH == 0 ||
                fx == -1 && n % WIDTH == MAX_WIDTH_INDEX
            )
                return alert(
                    "GAME OVER");

            draw(n, "Lime");

            if (n == dz) {

                while (sn.indexOf(dz = ~~(Math.random() * POSITIONS_LENGTH)) >= 0);

                draw(dz, "Yellow");

            } else

                draw(sn.pop(), "Black");

            setTimeout(arguments.callee, 130);

        }();
    </script>

</body>

</html>